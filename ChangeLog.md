## ChangeLog

### v2.2 Preview2 - 20210828
#### 后端重构预览版
1. 相关源码暂未更新
2. 更多，查看release的[readme](https://github.com/er10yi/MagiCude/releases/tag/v2.2-preview2)


### v2.2 Preview - 20210223
#### 前端重构预览版
1. 相关源码暂未更新
2. 更换前端架构（antd pro）
3. 优化操作
4. 增加任务结果

### 待完成
1. Dashboard及任务结果统计
2. 资产-应用系统与ip关联
3. 系统设置-标签
4. 数据管理-批量导入
5. 数据管理-报告下载
6. 数据管理-数据迁移

### v2.1 - 20201227

#### features
1. 增加 nmap局域网扫描结果解析，包括mac地址和设备类型
2. 增加 检测结果-web信息新增http响应头信息和原始响应，及url链接显示
3. 检测结果-漏洞 可新增漏洞
4. 资产管理新增应用系统
5. 新增分类管理，包含公司部门人员和标签综合分类
6. 主机/域名，增加应用系统显示，子域名编辑
7. 资产ip、端口drawer，新增应用系统显示
8. 新增ip标签，端口标签
9. 增加企业微信群机器人通知
10. 增加钉钉群机器人、企微群机器人发送测试消息功能，增加发送测试邮件功能
11. 增加IM消息，邮件发送日志，可在提醒日志查看（包括异常信息）
12. 增加高危资产推送，实时推送到企微群和钉钉群

#### optimize
1. 优化404页面显示
2. 优化通知设置页面
3. 优化IM实时通知

#### bug fixes
1. 修复 JavaSambaWeakPass无法使用的问题
2. 修复 域名不规范时，ip端口信息无法入库问题
3. 修复 httpp任务可能无法结束的问题

#### alter
1. ip项目组相关信息，移动到资产管理

#### remove
1. 移除插件-代码编辑器
2. 检测结果，移除url页面
3. HTTPElasticsearchUnauth插件，去除http服务

### v2.0.20 - 20201028

1. 优化多表数据显示逻辑
2. 优化任务和子任务显示，默认不显示子任务，无子任务不能打开子任务的Drawer，子任务数量移到任务名称前显示
3. 任务，cron任务删除移到类型列
4. 任务及web信息增加 增加显示，可以按需选择显示的列
5. 任务新增渐变色的进度百分比显示
6. 任务编辑，新增cron表达式模拟解析
7. 优化侧边栏，部分菜单二级收纳
8. 项目信息添加负责人显示，可直接新增部门和负责人
9. 检测结果新增ip、端口、漏洞名称方式搜索（三者是或的关系）
10. web信息新增ip、端口方式搜索（两者是或的关系）
11. 任务端口，新增任务名称方式搜索，用于导出单次任务的端口扫描结果（暂缓方式，后续优化）
12. 资产ip，新增统计列，方便查看当前ip的漏洞数量和端口数量
13. 资产ip，新增漏洞数目
14. 批量导入-项目信息ip，移除如果ip不存在，会新增
15. 批量导入-ip端口，增加无端口信息的ip导入（避免使用新增C段甚至B段的格式，会导致整个C段或B段的ip都导入数据库）
16. 批量导入-ip主机名，修复主机名重复时，导入失败问题
17. nmap模式增加域名扫描、-sn(ping)结果解析
18. 启动任务前，发一次agent心跳包监控，防止agent掉线漏任务

### v2.0.2 - 20201011

部署脚本：
1. 日志提示增加字体颜色
2. 增加卸载脚本
3. center部署无需本地手动修改前端api地址和agent.yml中的地址，只需部署时选择即可
4. agent分布式部署无需本地手动修改agent.yml中的地址，只需部署时输入部署center的ip地址即可
5. 优化判断依赖是否存在的方式

### v2.0.1 - 20201009

部署脚本：
1. 增加部署脚本执行目录判断（issues #3 建议判断或约束一下安装脚本执行目录）
2. 增加agent.yml内容是否已经修改判断
3. 增加center和agent所需文件判断
4. 增加前端api地址是否修改判断
5. 增加操作系统判断
6. 修复多次重新部署的时候，环境变量会写入多次
7. 优化脚本日志输出，屏蔽非脚本错误输出，优化所有脚本
8. Python升级到3.9.0
9. 部署脚本运行结束时，增加信息和错误提示
10. 移除agentDependency，nmap更新到7.90

### 正式版 v2.0 - 20200925

正式版发布，同时开源

### 公测版 v1.3.25 - 20200913

   前端：
1. 修复 子任务Drawer，调整分页无效的问题
2. 优化 用code标签显示代码
3. 新增 插件页面新增插件代码高亮，python3的selfd插件可前端新增(已知bug，第一次进入插件页面，新增或编辑需要打开两次代码高亮插件才会正常显示，第二次保存才能正常添加代码)
4. 新增 设置-批量导入，新增python3的selfd插件配置导入，主要用于python3的selfd插件配置及代码导入
5. 新增 新增各个类型任务的demo

   后端：
6. 修复 nse类型任务，获取状态时不显示PID信息
7. 修复 nse、selfd、httpp任务，资产库无对应的信息时，任务也会发给agent
8. 修复 无资产ip时，目标ip为ipNoPort，unknownPortSerVer，ipAllPort，任务也会发给agent
9. 修复 修复插件未设置服务和版本时，启动任务会开启所有插件
10. 优化 优化新增自定义插件，插件核心增加Jep方式调用python代码，可前端直接新增python3的selfd自定义类型的插件（重要更新，TDL的一半，优化新增自定义插件并丰富插件）
11. 优化 优化全部批量删除
12. 新增 新增python3的selfd插件配置导入接口
13. 新增 agent新增python插件import检测，如模块未安装，则会自动安装
14. 新增 插件配置新增http、dns辅助验证，用于插件辅助验证无回显漏洞（TDL 增加无回显插件检测）
15. 新增 增加HTTP json插件解析
16. 修改 随机获取ua的方式修改，存入redis进行随机
    
    数据库：
17. 新增 插件配置新增plugincode字段，用于保存插件代码
18. 新增 插件配置新增validatetype字段，用于开启插件http辅助验证或dns辅助验证
    
    配置文件：
19. 新增 agent.yml新增jep节点，用于保存JEP本地库的绝对路径
20. 新增 agent.yml新增center节点，用于插件辅助验证时传递http接口和dns的ip地址 
    
    部署脚本:
21. 增加 新增Python3.8编译安装
22. 移除 移除jre14，修改成jdk15（JEP编译需要）
    
    文档：
23. 优化 优化快速上手及说明文档
24. 增加 新增Readme文档
25. 增加 新增插件编写说明

### 公测版 v1.2.2 - 20200722

1. 优化center部署脚本，增加判断是否已经运行过部署脚本，避免误操作二次运行部署脚本（如果已经部署，则需要用户交互），优化docker服务运行状态检测
2. 优化initDataAndStart.sh，增加脚本复制和执行成功的判断
3. 修改center.yml，token过期时间设置成一小时
4. 优化任务插件显示，将插件启用状态体现到操作中，优化插件启用禁用
5. 新增子任务展开Drawer
6. about页面版本上增加changelog的Drawer，增加更新日志及TDL
7. 前端依赖更新到最新

### 公测版 v1.2.1 - 20200715

   前端：
1. 增加about页面
2. 增加菜单栏显示与隐藏的Collapse，涉及的页面：任务、资产ip、资产端口、主机、检测结果、web信息、web信息和url
3. 优化资产ip，去除编辑页面显示ip所有信息，修改成Drawer方式显示，并增加url超链接
4. 优化资产端口，去除编辑页面显示端口所有信息，修改成Drawer方式显示，并增加http和https链接打开，增加url超链接
5. 优化新建任务的数量前端样式，将input修改成number模式
6. 优化检测类型任务，将input修改成单选模式
7. 优化web信息中ip的显示，增加打开http和https链接的Popover
8. 首页四个折线图修改成显示最新数据的10%
9. 修改设置-通知设置中的风险等级编辑样式，从input改成单选模式
10. 修改cron表达式解析结果的样式，改成表格

### 公测版 v1.2.0 - 20200706

公开公测开启

### 内测版 v1.1 - 20200615

1. 优化部署步骤，修改部署脚本成一键部署
2. 部署脚本增加系统源修改判断和docker镜像源修改判断（需要用户交互）
3. 部署脚本增加判断，提高安装部署成功率
4. 前端增加web信息功能，后端优化部分代码
5. 文档增加Q/A章节、微信公众号、项目的目录结构说明，为公测做准备
6. 增加公测宣传文档
7. 增加magicude执行脚本，便于查看系统状态及操作系统（0624）

###  内测 v1.0 - 20200528

公开内测开启
